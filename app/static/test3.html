<html>
	<head>
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="shortcut icon" href="theme/app/img/favicon.ico"/>
        
        <!-- IE 8 Compatibility -->
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

        <link rel="stylesheet" type="text/css" href="externals/openlayers/theme/default/style.css" />
        <script type="text/javascript" src="script/OpenLayers.js"></script>
        
        <!-- Ext resources -->
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/xtheme-gray.css" />
        <script type="text/javascript" src="externals/ext/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="externals/ext/ext-all-debug.js"></script>

        <!-- OpenLayers resources -->
        <link rel="stylesheet" type="text/css" href="externals/openlayers/theme/default/style.css" />
        <script type="text/javascript" src="script/OpenLayers.js"></script>

        <!-- GeoExt resources -->
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/popup.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/layerlegend.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/gxtheme-gray.css" />
        <script type="text/javascript" src="script/GeoExt.js"></script> 

        
        
        <script type="text/javascript">
        var mapPanel;
        Ext.onReady(function() {
            var map =  new OpenLayers.Map();
        	var ctrl, toolbarItems = [], action, actions = {};

        	
        	
            var wms = new OpenLayers.Layer.WMS(
            	"Global Imagery",
                "http://maps.opengeo.org/geowebcache/service/wms",
                {layers: "bluemarble"}
            );
			var vector = new OpenLayers.Layer.Vector("vector");
            map.addLayers([wms,vector]);
            alert( "wms: "+map.getLayerIndex(wms));
            alert( "vec: "+map.getLayerIndex(vector));

            action = new GeoExt.Action({
                control: new OpenLayers.Control.ZoomToMaxExtent(),
                map: map,
                text: "max extent",
                tooltip: "zoom to max extent"
            });
            actions["max_extent"] = action;
            toolbarItems.push(action);
            toolbarItems.push("-");
                       
            action = new GeoExt.Action({
                text: "draw poly",
                control: new OpenLayers.Control.DrawFeature(
                    vector, OpenLayers.Handler.Polygon
                ),
                map: map,
                // button options
                toggleGroup: "draw",
                allowDepress: false,
                tooltip: "draw polygon",
                // check item options
                group: "draw"
            });
            actions["draw_poly"] = action;
            toolbarItems.push(action);
                    
        	new Ext.Viewport({
        	    layout: 'border',
        	    items: [{
        	        region: 'center',
        	    	xtype: "gx_mappanel",
                    id: "mappanel",
                    layers: [wms, vector],
                    extent: "-5,35,15,55",
                    map: map,
                    tbar: toolbarItems
        	    }]
        	});
        });

		</script>
        
	</head>
	<body>
		
	</body>
</html>